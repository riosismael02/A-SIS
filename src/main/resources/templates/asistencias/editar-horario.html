<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/header :: head('Editar Horario - A-SIS')"><link rel="icon" th:href="@{/favicon.ico}" type="image/x-icon"/></head>

<body data-template="editar-horario">

<div th:replace="fragments/header :: body"></div>
<main class="flex-fill">
    <div class="container">
        <div class="bloque-elevado px-5 py-4 mt-container">

            <!-- Título -->
            <div class="d-flex align-items-center mb-4">
                <a th:href="@{/asistencias/detalle(dni=${edicionDTO.dni})}" class="me-3 color-iconos d-flex align-items-center" title="Volver al detalle">
                    <i class="bi bi-arrow-left-circle me-1 fs-5"></i>
                    <i class="bi bi-clock fs-5"></i>
                </a>
                <h4 class="mb-0 text-h">Editar Horarios</h4>
            </div>

            <!-- Información del empleado y fecha -->
            <div class="mb-4">
                <p class="mb-1"><strong>Empleado:</strong> <span th:text="${edicionDTO.dni}"></span></p>
                <p class="mb-1"><strong>Fecha:</strong> <span th:text="${#temporals.format(edicionDTO.fecha, 'dd/MM/yyyy')}"></span></p>
            </div>

            <!-- Formulario de edición -->
            <form th:action="@{/asistencias/guardar-horario}" th:object="${edicionDTO}" method="post" class="mt-3">
                <input type="hidden" th:field="*{dni}" />
                <input type="hidden" th:field="*{fecha}" />

                <!-- Primer Horario -->
                <div class="card mb-4">
                    <div class="card-header bg-light">
                        <h5 class="mb-0">Horario Principal</h5>
                    </div>
                    <div class="card-body">
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="horaEntrada1" class="form-label">Hora de Entrada</label>
                                <input type="time" class="form-control" id="horaEntrada1"
                                       th:field="*{horaEntrada1}" required />
                            </div>

                            <div class="col-md-6">
                                <label for="horaSalida1" class="form-label">Hora de Salida</label>
                                <input type="time" class="form-control" id="horaSalida1"
                                       th:field="*{horaSalida1}" required />
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Segundo Horario -->
                <div class="card mb-4">
                    <div class="card-header bg-light">
                        <h5 class="mb-0">Horario Secundario</h5>
                    </div>
                    <div class="card-body">
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="horaEntrada2" class="form-label">Hora de Entrada</label>
                                <input type="time" class="form-control" id="horaEntrada2"
                                       th:field="*{horaEntrada2}" />
                            </div>

                            <div class="col-md-6">
                                <label for="horaSalida2" class="form-label">Hora de Salida</label>
                                <input type="time" class="form-control" id="horaSalida2"
                                       th:field="*{horaSalida2}" />
                            </div>
                        </div>
                    </div>
                </div>

                <div class="mb-4">
                    <label for="motivoCambio" class="form-label">Motivo del cambio</label>
                    <textarea class="form-control" id="motivoCambio" th:field="*{motivoCambio}"
                              rows="3" required></textarea>
                </div>

                <div class="d-flex justify-content-between">
                    <button type="submit" class="btn-action">
                        <i class="bi bi-save me-1"></i> Guardar Cambios
                    </button>
                </div>
            </form>

            <!-- Mensajes de éxito/error -->
            <div th:if="${success}" class="alert alert-success mt-3" th:text="${success}"></div>
            <div th:if="${error}" class="alert alert-danger mt-3" th:text="${error}"></div>
        </div>
    </div>
</main>

<div th:replace="fragments/footer :: footer"></div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>